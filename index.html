<!DOCTYPE html>
<html>
   <head>
     <link href="https://fonts.googleapis.com/css?family=Muli" rel="stylesheet">
     <script src="https://www.gstatic.com/firebasejs/3.4.0/firebase.js"></script>
     <script>
        // Initialize Firebase
        var config = {
          apiKey: "AIzaSyAWLW9urLqU-ot7W2XA2BDJgubRMN9XyMI",
          authDomain: "kimonohub-ff2cd.firebaseapp.com",
          databaseURL: "https://kimonohub-ff2cd.firebaseio.com",
          storageBucket: "",
          messagingSenderId: "974458846894"
        };
        firebase.initializeApp(config);
     </script>
     <script src="https://use.fontawesome.com/d484aa907d.js"></script>
     <link rel="stylesheet" href="kh.css">
     <script src="https://code.jquery.com/jquery-3.1.0.slim.min.js"   integrity="sha256-cRpWjoSOw5KcyIOaZNo4i6fZ9tKPhYYb6i5T9RSVJG8="   crossorigin="anonymous"></script>
     <script src="https://d3js.org/d3.v2.min.js"></script>
     <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
     <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
     
     <script type="text/javascript">
     
    // Array of containing objects; "id" field is question ID,
    // "profile_question" is question text.


//SIGN IN AS amanda@kimonohub.com password: kimonohubuser

  firebase.auth().signInWithEmailAndPassword('amanda@kimonohub.com', 'kimonohubuser').catch(function(error) {
  // Handle Errors here.
  var errorCode = error.code;
  var errorMessage = error.message;
  // ...
  });
  
  function writeNewBullet(bulletData, docID) {
    var path = 'docs/' + docID +'/' + bulletData.type;
  
    // Get a key for a new Bullet.
    var newBulletKey = firebase.database().ref().child(path).push().key;
  
    // Write the new bullet's data simultaneously in the database
    var updates = {};
    updates[path + '/' + newBulletKey] = bulletData;
  
    firebase.database().ref().update(updates).then(function() {
      console.log("Saved bullet!");
    });
  }

  // This function takes the name of a collection of radio buttons. It
  // returns the value of the button that is checked. We expect exactly
  // ONE button to be checked.
  
  
  function buttonClick(type, inputs) {
    var dbData = {
      type: type
    };
    Object.keys(inputs).forEach(function(key) {
       var val = inputs[key];
       var inputElements = document.getElementsByName(val);
       if (inputElements[0].nodeName == "SPAN"){
         dbData[key] = inputElements[0].innerHTML; 
       }
       else if (inputElements.length == 1) {
        dbData[key] = inputElements[0].value; 
        inputElements[0].value = "";
       }
       else if (inputElements.length == 2) {
         if (inputElements[0].type == "radio"){
           for (var i=0; i<inputElements.length; i++) {
             if (inputElements[i].checked == true){
               dbData[key] = inputElements[i].value; 
               inputElements[i].checked = false;
               
             }
           }
         }
       }
       
    })
    
    
    
    var documentID = 101; // TODO: Replace with real document ID.
    writeNewBullet(dbData, documentID)
    
    // TODO: Show entry on html
    // TODO: Reset document to account for new bullet entry.
  }
  
  function addNew (val, position, format) {
    var newentry = document.getElementsByName(val)[0].value;
    var parent = document.getElementById(position);
    var child = document.createElement(format);
    child.appendChild(document.createTextNode(newentry));
    parent.appendChild(child);
  }
  
  function addNew2 (val1, val2, position, format, end) {
    var newentry1 = document.getElementsByName(val1)[0].value;
    var newentry2 = document.getElementsByName(val2)[0].value;
    var parent = document.getElementById(position);
    var child = document.createElement(format);
    child.appendChild(document.createTextNode(newentry1+': '+newentry2+end));
    parent.appendChild(child);
  }
  
  function addNew3 (val1, val2, val3, position, format) {
    var newentry1 = document.getElementsByName(val1)[0].value;
    var newentry2 = document.getElementsByName(val2)[0].value;
    var newentry3 = 'negative';
    if (document.getElementsByName(val3)[0].checked){
      newentry3 = 'positive';
    }
    var parent = document.getElementById(position+'-'+newentry3);
    $(parent).append('<li><div class = "bold-title">'+newentry1+': </div> '+newentry2+'</li>');
  }

 function addNew4 (val1, val2, val3, position) {
    var newentry1 = document.getElementsByName(val1)[0].value;
    var newentry2 = document.getElementsByName(val2)[0].value;
    var newentry3 = document.getElementsByName(val3)[0].value;
    
    var parent = document.getElementById(position);
    $(parent).append('<li class="metric">'+newentry1+': <div class="number">'+newentry2+newentry3+'</div></li>');
  }
  
function addNew5 (val1, val2, position) {
    var newentry1 = document.getElementsByName(val1)[0].value;
    var newentry2 = document.getElementsByName(val2)[0].value;
    var d = (new Date()).toString().split(' ').splice(1,3).join(' ');
    
    var parent = document.getElementById(position);
    $(parent).append('<li>'+newentry1+'</span><div class = "author-foot"><span class = "author">'+newentry2+'</span><span class ="date">'+d+'</span><span class="stars">1<i class="fa fa-star" aria-hidden="true"></i></span></div></li>');
  }  
  
 
	function renderChart() {	
        var cdata = [
	    {"Name": "GROWTH",
	    "Average Rating": 6},
	    {"Name": "INDUSTRY",
	    "Average Rating": 7},
	    {"Name": "MANAGEMENT",
	    "Average Rating": 3},
	    {"Name": "OPERATIONS",
	    "Average Rating": 7},
	    {"Name": "FINANCIAL",
	    "Average Rating": 9},
	    {"Name": "MOAT",
	    "Average Rating": 8},
	    {"Name": "OTHER",
	    "Average Rating": 7},
	];
	var valueLabelWidth = 1; // space reserved for value labels (right)
	var barHeight = 25; // height of one bar
	var barLabelWidth = 95; // space reserved for bar labels
	var barLabelPadding = 3; // padding between bar and bar labels (left)
	var gridLabelHeight = 1; // space reserved for gridline labels
	var gridChartOffset = 0.2; // space between start of grid and first bar
	var maxBarWidth = 130; // width of the bar with the max value
	 
	// accessor functions 
	var barLabel = function(d) { return d['Name']; };
	var barValue = function(d) { return parseFloat(d['Average Rating']); };
	 
	// scales
	var yScale = d3.scale.ordinal().domain(d3.range(0, cdata.length)).rangeBands([0, cdata.length * barHeight]);
	var y = function(d, i) { return yScale(i); };
	var yText = function(d, i) { return y(d, i) + yScale.rangeBand() / 2; };
	var x = d3.scale.linear().domain([0, 10]).range([0, maxBarWidth]);
	
	// svg container element
	var chart = d3.select('#chart').append("svg")
	  .attr('width', maxBarWidth + barLabelWidth + valueLabelWidth)
	  .attr('height', gridLabelHeight + gridChartOffset + cdata.length * barHeight);
	

	// bars
	var barsContainer = chart.append('g')
	  .attr('transform', 'translate(' + barLabelWidth + ',' + (gridLabelHeight + gridChartOffset) + ')'); 
	barsContainer.selectAll("rect").data(cdata).enter().append("rect")
	  .attr('y', y)
	  .attr('height', yScale.rangeBand()*0.7)
	  .attr('width', function(d) { return x(barValue(d)); })
	  .attr('stroke', 'white')
	  .attr('opacity', .6)
	  .attr("rx", 5)         // set the x corner curve radius
      .attr("ry", 5)        // set the y corner curve radius
	  .attr('fill', function(d) { return (barValue(d) < 2 ? "RGB(250, 60, 72)" : barValue(d) < 4 ? "RGB(251, 72, 87)" : barValue(d) 		< 5 ? "RGB(253, 115, 112)" : barValue(d) < 7 ? "RGB(254, 213, 189)" : barValue(d) < 8 ? "RGB(219, 238, 208)" : barValue(d) < 9 ? "RGB(154, 202, 124)" : "RGB(84, 130, 53)"); });
	
		// bar labels
	var labelsContainer = chart.append('g')
	  .attr('transform', 'translate(' + (barLabelWidth - barLabelPadding) + ',' + (gridLabelHeight + gridChartOffset) + ')'); 
	labelsContainer.selectAll('text').data(cdata).enter().append('text')
	  .attr('y', yText)
	  .attr('stroke', 'none')
	  .attr('fill', "RGB(128,128,128)")
	  .attr("dy", ".15em") // vertical-align: middle
	  .attr('text-anchor', 'end')
	  .attr("font-size","12px")
	  .text(barLabel);
	}

</script>
<script>
	function rendermChart() {	
        var mdata = [
	    
	    {"Name": "Culture & Values",
	    "Average Rating": 6.4},
	    {"Name": "Work/Life Balance",
	    "Average Rating": 6.1},
	    {"Name": "Compensation",
	    "Average Rating": 6.2},
	    {"Name": "Career Opportunity",
	    "Average Rating": 5.8},
	];
	var valueLabelWidth = 1; // space reserved for value labels (right)
	var barHeight = 25; // height of one bar
	var barLabelWidth = 135; // space reserved for bar labels
	var barLabelPadding = 3; // padding between bar and bar labels (left)
	var gridLabelHeight = 1; // space reserved for gridline labels
	var gridChartOffset = 0.2; // space between start of grid and first bar
	var maxBarWidth = 120; // width of the bar with the max value
	 
	// accessor functions 
	var barLabel = function(d) { return d['Name']; };
	var barValue = function(d) { return parseFloat(d['Average Rating']); };
	 
	// scales
	var yScale = d3.scale.ordinal().domain(d3.range(0, mdata.length)).rangeBands([0, mdata.length * barHeight]);
	var y = function(d, i) { return yScale(i); };
	var yText = function(d, i) { return y(d, i) + yScale.rangeBand() / 2; };
	var x = d3.scale.linear().domain([0, 10]).range([0, maxBarWidth]);
	
	// svg container element
	var mchart = d3.select('#mchart').append("svg")
	  .attr('width', maxBarWidth + barLabelWidth + valueLabelWidth)
	  .attr('height', gridLabelHeight + gridChartOffset + mdata.length * barHeight);
	

	// bars
	var barsContainer = mchart.append('g')
	  .attr('transform', 'translate(' + barLabelWidth + ',' + (gridLabelHeight + gridChartOffset) + ')'); 
	barsContainer.selectAll("rect").data(mdata).enter().append("rect")
	  .attr('y', y)
	  .attr('height', yScale.rangeBand()*0.7)
	  .attr('width', function(d) { return x(barValue(d)); })
	  .attr('stroke', 'white')
	  .attr('opacity', .6)
	  .attr("rx", 5)         // set the x corner curve radius
      .attr("ry", 5)        // set the y corner curve radius
	  .attr('fill', function(d) { return (barValue(d) < 4 ? "RGB(250, 60, 72)" : barValue(d) < 5 ? "RGB(251, 72, 87)" : barValue(d) 		< 6 ? "RGB(253, 115, 112)" : barValue(d) < 7 ? "RGB(254, 213, 189)" : barValue(d) < 8 ? "RGB(219, 238, 208)" : barValue(d) < 9 ? "RGB(154, 202, 124)" : "RGB(84, 130, 53)"); });
	
		// bar labels
	var labelsContainer = mchart.append('g')
	  .attr('transform', 'translate(' + (barLabelWidth - barLabelPadding) + ',' + (gridLabelHeight + gridChartOffset) + ')'); 
	labelsContainer.selectAll('text').data(mdata).enter().append('text')
	  .attr('y', yText)
	  .attr('stroke', 'none')
	  .attr('fill', "RGB(128,128,128)")
	  .attr("dy", ".15em") // vertical-align: left
	  .attr('text-anchor', 'end')
	  .attr("font-size","12px")
	  .text(barLabel);
	  
	  // bar values
	  	var valuesContainer = mchart.append('g')
	  .attr('transform', 'translate(' + (valueLabelWidth) + ',' + (gridLabelHeight + gridChartOffset) + ')'); 
	valuesContainer.selectAll('text').data(mdata).enter().append('text')
	  .attr('y', yText)
	  .attr('stroke', 'none')
	  .attr('fill', "RGB(128,128,128)")
	  .attr("dy", ".15em") // vertical-align: middle
	  .attr("dx", barLabelWidth + maxBarWidth-30) //margin right
	  .attr('text-anchor', 'start')
	  .attr("font-size","12px")
	  .text(barValue);
	  
	    
	}
	
	
     </script>
     
     <script>

     
       function renderdChart(chartn, amt, key, color1, color2) {
           var data = [
             {"Date":"amount","Value": amt},
             {"Date":"other","Value": 100-amt}];
    
            width = 150; // Changes pie size as a whole
            height = 150; // Changes pie size as a whole
            radius = Math.min(width-10,height-10)/2;
    
            var color = d3.scale.ordinal()
              .domain(["amount", "other"])
              .range([color1, color2]);
                
            var arc = d3.svg.arc()  
                .outerRadius(radius -50)
                .innerRadius(radius - 43); //makes thinner donut
        
            var arcOver = d3.svg.arc()  
                .outerRadius(radius +50)
                .innerRadius(0);
        
            var svg = d3.select("#"+chartn).append("svg")
                .attr("width",width/2)
                .attr("height",height/2)
                .append("g")
                .attr("transform","translate("+width/4+","+height/4+")");
        
            var pie = d3.layout.pie()
                  .sort(null)
                  .value(function(d){return d.Value;});
        
            var g = svg.selectAll(".arc")
                .data(pie(data))
                .enter()
                .append("g")
                .attr("class","arc")
                
           
            svg.selectAll("text").data(pie(data)).enter()
                .append("text")
                .attr("class","label1")
                .attr("transform", function(d) {
                   var dist=radius-70; //where the text goes
                   var winkel=(d.startAngle+d.endAngle)/2;
                   var x=dist*Math.sin(winkel);
                   var y=-dist*Math.cos(winkel);
                   
            return "translate(" + x + "," + y + ")";
                })
                .attr("dy", "0.35em")
                .attr("text-anchor", "middle")
                .style('fill',color1)
                .style('font-family','Muli')
                .style('font-size','1.2em')
            
            .text(function(d){
                return (key);
            
            });
            
            g.append("path")
                .attr("d",arc)
                .style("fill",function(d){return color(d.data.Date);});
       } 
     </script>
     
     <script>
     
     
    

      var data = {
        "current-price" : 43.00,
        "revenue-ltm" : 8889,
        "gross-margin-pct" : 0.67,
        "opex-margin-pct" : 0.46,
        "debt" : 1000,
        "shares-outstanding" : 479.5,
        "terminal-fcf" : 0.03,
        "discount-rate" : 0.12,
        "five-revenue-pct" : 0.03,
        "five-opex-margin-pct" : 0.03,
        "five-gross-margin-pct" : -0.000
      };
      
      var derived = {};


      function fmtPrice(p) { return "$" + p.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}
      function fmtPct(p)   { return (p * 100).toFixed(1) + "%" }
      function fmtDeci(p) { return p.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",") }
      function fmtPdeci(p) { return "$" + p.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}



      function redisplay() {

        $( ".current-price" ).text(fmtPdeci(data["current-price"]))
        $( ".revenue-ltm" ).text(fmtPrice(data["revenue-ltm"]))
        $( ".gross-margin-pct" ).text(fmtPct(data["gross-margin-pct"]))
        $( ".opex-margin-pct" ).text(fmtPct(data["opex-margin-pct"]))

        $( ".gross-margin-ltm" ).text(fmtPrice(derived["gross-margin-ltm"]))
        $( ".opex-margin-ltm" ).text(fmtPrice(derived["opex-margin-ltm"]))
        $( ".fcf-ltm" ).text(fmtPrice(derived["fcf-ltm"]))
        $( ".fcf-margin-pct" ).text(fmtPct(derived["fcf-margin-pct"]))

        $( ".five-revenue-pct" ).text(fmtPct(data["five-revenue-pct"]))
        $( ".five-gross-margin-pct" ).text(fmtPct(data["five-gross-margin-pct"]))
        $( ".five-opex-margin-pct" ).text(fmtPct(data["five-opex-margin-pct"]))

      	$( ".five-revenue-amt" ).text(fmtPrice(derived["five-revenue-amt"]))
        $( ".five-gross-margin-amt" ).text(fmtPrice(derived["five-gross-margin-amt"]))
        $( ".five-opex-margin-amt" ).text(fmtPrice(derived["five-opex-margin-amt"]))
        $( ".five-fcf-amt" ).text(fmtPrice(derived["five-fcf-amt"]))
        $( ".five-fcf-margin-pct" ).text(fmtPct(derived["five-fcf-margin-pct"]))
        $( ".debt" ).text(fmtPrice(data["debt"]))
        $( ".shares-outstanding" ).text(fmtDeci(data["shares-outstanding"]))
        $( ".terminal-fcf" ).text(fmtPct(data["terminal-fcf"]))
        $( ".discount-rate" ).text(fmtPct(data["discount-rate"]))


      	$( ".rev-amt-five" ).text(fmtPrice(derived["rev-amt-five"]))
      	$( ".gross-pct-five" ).text(fmtPct(derived["gross-pct-five"]))
      	$( ".gross-amt-five" ).text(fmtPrice(derived["gross-amt-five"]))
      	$( ".opex-pct-five" ).text(fmtPct(derived["opex-pct-five"]))
      	$( ".opex-amt-five" ).text(fmtPrice(derived["opex-amt-five"]))
      	$( ".fcf-amt-five" ).text(fmtPrice(derived["fcf-amt-five"]))
      	$( ".fcf-pct-five" ).text(fmtPct(derived["fcf-pct-five"]))
        $( ".fcf-amt-terminal" ).text(fmtPrice(derived["fcf-amt-terminal"]))
        $( ".intrinsic-price" ).text(fmtPdeci(derived["intrinsic-price"]))
        $( ".percent-undervalued" ).text(fmtPct(derived["percent-undervalued"]))
      }

      function recalc() {
        // First stratum
        derived["gross-margin-ltm"] = data["revenue-ltm"] * data["gross-margin-pct"]
        derived["opex-margin-ltm"] = data["revenue-ltm"] * data["opex-margin-pct"]
        derived["fcf-ltm"] = derived["gross-margin-ltm"] - derived["opex-margin-ltm"]

        // Second stratum
        derived["fcf-margin-pct"] = derived["fcf-ltm"] / data["revenue-ltm"]

      	// Third stratum
       	derived["five-revenue-amt"] = data["revenue-ltm"] * (1+data["five-revenue-pct"]) * (1+data["five-revenue-pct"]) * (1+data["five-revenue-pct"]) * (1+data["five-revenue-pct"]) * (1+data["five-revenue-pct"])
       	derived["five-gross-margin-amt"] = derived["five-revenue-amt"] * (data["gross-margin-pct"]+data["five-gross-margin-pct"])
        derived["five-opex-margin-amt"] = derived["five-revenue-amt"] * (data["opex-margin-pct"]+data["five-opex-margin-pct"])
        derived["five-fcf-amt"] = derived["five-gross-margin-amt"] - derived["five-opex-margin-amt"]

      	// Fourth stratum
      	derived["five-fcf-margin-pct"] = derived["five-fcf-amt"] / derived["five-revenue-amt"]

	// Fifth stratum
	derived["rev-amt-one"] = data["revenue-ltm"] * (1+data["five-revenue-pct"])
	derived["rev-amt-two"] = (derived["rev-amt-one"] * (1+data["five-revenue-pct"]))
	derived["rev-amt-three"] = derived["rev-amt-two"] * (1+data["five-revenue-pct"])
	derived["rev-amt-four"] = derived["rev-amt-three"] * (1+data["five-revenue-pct"])
	derived["rev-amt-five"] = derived["rev-amt-four"] * (1+data["five-revenue-pct"])
	derived["gross-pct-one"] = data["gross-margin-pct"] + data["five-gross-margin-pct"]
	derived["gross-pct-two"] = data["gross-margin-pct"] + data["five-gross-margin-pct"]*2
	derived["gross-pct-three"] = data["gross-margin-pct"] + data["five-gross-margin-pct"]*3
	derived["gross-pct-four"] = data["gross-margin-pct"] + data["five-gross-margin-pct"]*4
	derived["gross-pct-five"] = data["gross-margin-pct"] + data["five-gross-margin-pct"]*5
	derived["gross-amt-one"] = derived["gross-pct-one"] * derived["rev-amt-one"]
	derived["gross-amt-two"] = derived["gross-pct-two"] * derived["rev-amt-two"]
	derived["gross-amt-three"] = derived["gross-pct-three"] * derived["rev-amt-three"]
	derived["gross-amt-four"] = derived["gross-pct-four"] * derived["rev-amt-four"]
	derived["gross-amt-five"] = derived["gross-pct-five"] * derived["rev-amt-five"]
	derived["opex-amt-one"] = derived["opex-margin-ltm"] * (1+data["five-opex-margin-pct"])
	derived["opex-amt-two"] = derived["opex-amt-one"] * (1+data["five-opex-margin-pct"])
	derived["opex-amt-three"] = derived["opex-amt-two"] * (1+data["five-opex-margin-pct"])
	derived["opex-amt-four"] = derived["opex-amt-three"] * (1+data["five-opex-margin-pct"])
	derived["opex-amt-five"] = derived["opex-amt-four"] * (1+data["five-opex-margin-pct"])



	derived["fcf-amt-one"] = derived["gross-amt-one"]-derived["opex-amt-one"]
	derived["fcf-amt-two"] = derived["gross-amt-two"]-derived["opex-amt-two"]
	derived["fcf-amt-three"] = derived["gross-amt-three"]-derived["opex-amt-three"]
	derived["fcf-amt-four"] = derived["gross-amt-four"]-derived["opex-amt-four"]
	derived["fcf-amt-five"] = derived["gross-amt-five"]-derived["opex-amt-five"]
	derived["fcf-pct-one"] = derived ["fcf-amt-one"]/derived ["rev-amt-one"]
	derived["fcf-pct-two"] = derived ["fcf-amt-two"]/derived ["rev-amt-two"]
	derived["fcf-pct-three"] = derived ["fcf-amt-three"]/derived ["rev-amt-three"]
	derived["fcf-pct-four"] = derived ["fcf-amt-four"]/derived ["rev-amt-four"]
	derived["fcf-pct-five"] = derived ["fcf-amt-five"]/derived ["rev-amt-five"]
	derived["fcf-amt-terminal"] = (derived["fcf-amt-five"]*(1+data["terminal-fcf"]))/(data["discount-rate"]-data["terminal-fcf"])

	derived["intrinsic-price"] = (((derived["fcf-amt-one"]/(1+data["discount-rate"]))
	+(derived["fcf-amt-two"]/((1+data["discount-rate"])*(1+data["discount-rate"])))
	+ (derived["fcf-amt-three"]/((1+data["discount-rate"])*(1+data["discount-rate"])*(1+data["discount-rate"])))
	+(derived["fcf-amt-four"]/((1+data["discount-rate"])*(1+data["discount-rate"])*(1+data["discount-rate"])*(1+data["discount-rate"])))
	+derived["fcf-amt-five"]/((1+data["discount-rate"])*(1+data["discount-rate"])*(1+data["discount-rate"])*(1+data["discount-rate"])*(1+data["discount-rate"]))
	+derived["fcf-amt-terminal"]/((1+data["discount-rate"])*(1+data["discount-rate"])*(1+data["discount-rate"])*(1+data["discount-rate"])*(1+data["discount-rate"])))-data["debt"])/data["shares-outstanding"]


	derived["percent-undervalued"] = (derived["intrinsic-price"]/data["current-price"])-1;

        redisplay();
        console.log(derived ["fcf-amt-five"]);
        console.log(derived ["fcf-amt-four"]);
        console.log(derived ["fcf-amt-three"]);
        console.log(derived ["fcf-amt-two"]);
        console.log(derived ["fcf-amt-one"]);
        
      }

      $( document ).ready(function() {
        renderChart();
        rendermChart();
        renderdChart("CEO", 67, "67%", "LightSlateGrey", "Gainsboro");
        renderdChart("NPS", 58, "58%", "LightSlateGrey", "Gainsboro");
        renderdChart("OUTL", 52, "52%", "LightSlateGrey", "Gainsboro");
        renderdChart("IND", 80, "A", "MidnightBlue", "Gainsboro");
        renderdChart("CO", 90, "A+", "LightSlateGrey", "Gainsboro");
        renderdChart("VAL", 95, "A+", "CornflowerBlue", "Gainsboro");
        
        $('.sentiment').prop('checked', false);

        console.log("ready");
        recalc();

         $( "#five-revenue-pct-down" ).click(function(e) {
          data["five-revenue-pct"] -= 0.01;
          recalc();
          e.preventDefault();
        });

        $( "#five-revenue-pct-up" ).click(function(e) {
          data["five-revenue-pct"] += 0.01;
          recalc();
          e.preventDefault();
        });

          $( "#five-gross-margin-pct-down" ).click(function(e) {
          data["five-gross-margin-pct"] -= 0.002;
          recalc();
          e.preventDefault();
        });

        $( "#five-gross-margin-pct-up" ).click(function(e) {
          data["five-gross-margin-pct"] += 0.002;
          recalc();
          e.preventDefault();
        });

         $( "#five-opex-margin-pct-down" ).click(function(e) {
          data["five-opex-margin-pct"] -= 0.01;
          recalc();
          e.preventDefault();
        });

        $( "#five-opex-margin-pct-up" ).click(function(e) {
          data["five-opex-margin-pct"] += 0.01;
          recalc();
          e.preventDefault();
        });

        $( "#terminal-fcf-up" ).click(function(e) {
          data["terminal-fcf"] += 0.01;
          recalc();
          e.preventDefault();
        });

        $( "#terminal-fcf-down" ).click(function(e) {
          data["terminal-fcf"] -= 0.01;
          recalc();
          e.preventDefault();
        });

        $( "#discount-rate-up" ).click(function(e) {
          data["discount-rate"] += 0.01;
          recalc();
          e.preventDefault();
        });

        $( "#discount-rate-down" ).click(function(e) {
          data["discount-rate"] -= 0.01;
          recalc();
          e.preventDefault();
        });

      });

          
     </script>


   </head>
   <body>
    <div id="container">
      <div id="header">
          <div class="logo-wrap">
            <img id="logo" src="http://fullhdpictures.com/wp-content/uploads/2016/06/Luxottica-Logo.jpg" alt="Luxxotica">
            <h2>Luxxotica NYSE:LUX</h2>
            <div class="tag-wrap">
                <div class="tag">STRONG MOAT</div>
                <div class="tag">DEEP VALUE</div>
                <div class="tag">MARKET LEADER</div>
                <div class = "modalinline">
                <!-- Modal -->
                <div id="tagModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                    <!-- Modal content-->
                    <div>
                      <input type="text" class="add-tag" placeholder="tag" name="tag">
                    </div>
                
                  </div>
                </div>
              </div>
                <a data-toggle="modal" href="#tagModal"><div class="add-tag">+</div></a>
            </div>
          </div>
          <div class="summary-bar">
            <div class="wrap">
              <img class="reco-arrow" src="images/buyarrow.png"></img>
              <div class = "recomm-wrapper">
                <div class = "recomm">BUY</div>
                <div class="under">15% undervalued</div>
              </div>
            </div>
            <div class="rate-wrap">
              <div class="rate"><span class="indu">INDUSTRY rating</span><div id = "IND"></div></div>
              <div class="rate"><span class="comp">COMPANY rating</span><div id = "CO"></div></div>
              <div class="rate"><span class="valu">VALUATION rating</span><div id = "VAL"></div></div>
            </div>
          </div>
      </div>
      <div id="sidebarl">
        <div id="bprofile">
          <h1>Business Profile<a data-toggle="modal" href="#bpModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="bpModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Modal Header</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="comp name" name="compname">
                        <input type="text" placeholder="ticker" name="compticker">
                        <button type="button" class="submitdata"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
          <div id="chart"></div>
        </div>
        
        <div id="business">
          <h1>Business overview<a data-toggle="modal" href="#boModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="boModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add a bullet</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="" name="boverview">
                        <button type="button" class="submitdata" onclick="addNew('boverview','bo-ul','li') ; buttonClick('business-overview', {'bullet': 'boverview'})"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
                <ul id="bo-ul">
                    <li>Optical (1/3) and Sun (2/3)</li>
                    <li>Premium European and North American</li>
                    <li>Pays 5-15% of sales as royalties to premium brands, as well as covering promotions, manufacturing and design</li>
                    <li>10% of the overall global market share (X% of premium)</li>
                    <li>Global growth at ~6%</li>
                    <li>4,000 stores across North America under the LensCrafters, Sunglass Hut and Pearle Vision</li>
                </ul>
        </div>
        <div id="growth">
            <h1>Growth Drivers<a data-toggle="modal" href="#gdModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="gdModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add a driver</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="growth driver" name="gdriver">
                        <button type="button" class="submitdata" onclick=" addNew('gdriver','gd-ul','li') ; buttonClick('growth-drivers', {'bullet':'gdriver'})"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
                <ul id="gd-ul">
                    <li>Growing in-house brands</li>
                    <li>Licensing luxury brands</li>
                    <li>Increasing vertical integration</li>
                    <li>Expanding footprint</li>
                </ul>
        </div>

        <div id="profitability">
            <h1>Profitability Drivers<a data-toggle="modal" href="#proModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="proModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add a driver</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="profitability driver" name="pdriver">
                        <button type="button" class="submitdata" onclick="addNew('pdriver','pd-ul','li') ; buttonClick('profitability', {'bullet':'pdriver'})"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
                <ul id="pd-ul">
                    <li>US, where more profitable wholesale business is strongest, is suffering</li>
                    <li>GM highly sensitive to growth (fell 1% with sales decline)</li>
                    <li>Move production to lower cost countries</li>
                </ul>
        </div>
        
        <div id="ownership">
            <h1>Notable ownership<a data-toggle="modal" href="#ownModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="ownModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add ownership</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="shareholder name" name="shareholder">
                        <input type="number" placeholder="ownership %" name="ownershippct">%
                        <button type="button" class="submitdata" onclick="addNew2('shareholder', 'ownershippct','sh-ul','li','%') ; buttonClick('ownership', {'shareholder': 'shareholder', 'ownershippct': 'ownershippct'})"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
                <ul id="sh-ul">
                    <li>80+ year old founder owns 60%</li>
                    <li>Armani owns 5%</li>
                </ul>
        </div>
      
      <div id="comps"></div>
          <h1>Comps<a data-toggle="modal" href="#cModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="cModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add a comp</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="comp name" name="comp-name">
                        <input type="text" placeholder="ticker" name="comp-ticker">
                        <button type="button" class="submitdata" onclick="addNew2('comp-name', 'comp-ticker','comp-ul','li','') ; buttonClick('comps', {'compname': 'comp-name', 'compticker': 'comp-ticker'})"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
          <ul id="comp-ul">
              <li>Italian Safilo Group (Dior, Fendi, Jimmy Choo)</li>
          </ul>
      </div>
      <div id="content">
          <div id = "summary">
              <h1>Overall Summary<a data-toggle="modal" href="#sModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="sModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add a summary point</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="" name="summary">
                        <button type="button" class="submitdata" onclick="addNew('summary','summ-ul','li') ; buttonClick('summary', {'bullet':'summary'})"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
              <div class = "summarybox">
                  <ul id="summ-ul">
                      <li>Amazing moat, deep integration and wide distribution network likely to protect the company for several years</li>
                      <li>Changing retail landscape will cause growth levels likely to decline, may lead to multiple correction in the next 6 - 12 months</li>
                      <li>Succession issues likely to cause distraction over next 2-3 years</li>
                  </ul>
              </div>
          </div>
          <div id = "description">
              <h1>Company Description<a data-toggle="modal" href="#desModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="desModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add to description</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="" name="desc">
                        <button type="button" class="submitdata" onclick="addNew('desc','desc-div','p') ; buttonClick('description', {'bullet':'desc'})"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
              <div id="desc-div" class = "descriptiontext">Luxottica manufactures and retails prescription and nonprescription fashion eyewear. Its owned brands include Ray-Ban, Oakley, Oliver Peoples, Persol, Alain Mikli and Arnette. It also manufactures eyewear under license from global brands such as Chanel, Prada & Miu Miu, Dolce & Gabbana, Bvlgari, Tiffany & Co., Versace, Burberry, Ralph Lauren, DKNY, Paul Smith, Brooks Brothers, Tory Burch, Coach, Armani, Michael Kors and Starck Eyes. The Manufacturing & Wholesale division contributed E3.6 billion (41%) of consolidated revenue and E807mm (43%) of consolidated operating income, after elimination of intercompany sales, in 2015.
                <p>In the U.S the company operates retail stores such as LensCrafters, Sunglass Hut, and Pearle Vision, as well as shop-in-shops in Sears (Sears Optical), Target (Target Optical), and Macy's (LensCrafters). Retail distribution contributed 59% of consolidated revenue and 57% of consolidated operating income, after elimination of intercompany sales, in 2015. The company also provides vision care insurance in the United States through EyeMed.</p>
              </div>
          </div>
          <div id = "industry">
              <h1>Industry<a data-toggle="modal" href="#indModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="indModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add an industry bullet</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="title" name="indtitle">
                        <input type="text" placeholder="explanation" name="indexplanation">
                        
                        <label>
                          <input type="radio" class="sentiment" name="indsentiment" value="positive" />
                          <i class="fa fa-arrow-up" aria-hidden="true"></i>
                        </label>
                        
                        <label>
                          <input type="radio" class="sentiment" name="indsentiment" value="negative" />
                          <i class="fa fa-arrow-down" aria-hidden="true"></i>
                        </label>
                        
                        <button type="button" class="submitdata" onclick="addNew3('indtitle', 'indexplanation', 'indsentiment', 'ind-ul', 'li') ; buttonClick('industry-ideas', {'title': 'indtitle', 'bullet': 'indexplanation', 'sentiment': 'indsentiment' })"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
              <div class = "sections">
                <div class = "headwinds">
                  <img class="arrow" src="images/sellarrow.png" alt=" ">
                  <ul id="ind-ul-negative">
                      <li><div class = "bold-title">Lower traffic in retail: </div> Foot traffic is down and declining: tourism, foot traffic (esp in malls where new Macy store-in-stores are planned) are way down (especially in accessories).</li>
                      <li><div class = "bold-title">Competition from 'suppliers': </div> a lot of brands are starting to take their sunglass sales in-house, likely a result of building stronger online presences and being less dependent on LUX's distribution. especially true for sunglasses, where LUX has chosen to focus.
                        <ul>
                            <li>Kering (Gucci, Balenciaga, Stella McCartney, Saint Laurent, Brioni, and Alexander McQueen) has recently taken their business in-house due to 'brand dilution' and LUX's focus on their own brands or established brands like Chanel over up and coming brands.</li>
                            <li>Chanel, Elie Saab, Swatch, Omega now selling glasses on their own website in addition to the LUX platform</li>
                            <li>While it will be difficult for many existing brands to lose the sales from LUX's distribution network, as well as invest in their own design and manufacturing capabilities, newer brands may increasingly opt for this as a way of strengthening profits and online customer relationships.</li>
                        </ul>
                      </li>
                      <li><div class = "bold-title">Competition from online: </div> Warby Parker making increasing inroads ($300M retail) although at lower end of the market. Given the very high margins in glasses, can we expect prices across the board to come down over time as a result? sales to online retailers were down 50% in 1H16, with sales to Amazon down 90% as a result of trying to maintain minimum pricing.</li>
                      <li><div class = "bold-title">Sunglass market increasingly competitive: </div> 'very promotional retail environment'</li>
                  </ul>
                </div>
                <div class = "tailwinds">
                  <img class="arrow" src="images/buyarrow.png" alt=" ">
                  <ul id="ind-ul-positive">
                      <li><div class = "bold-title">Increased sunglasses penetration: </div> China & Emerging markets to go from 20% current penetration to 60% as in the US. This will likely take some time, as the trend is typically to go to 'fake' first.</li>
                  </ul>
                </div>
          </div>
          </div>
          <div id = "company">
              <h1>Company<a data-toggle="modal" href="#coModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="coModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add a company bullet</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="title" name="cotitle">
                        <input type="text" placeholder="explanation" name="coexplanation">
                        
                        <label>
                          <input type="radio" class="sentiment" name="cosentiment" value="positive" />
                          <i class="fa fa-arrow-up" aria-hidden="true"></i>
                        </label>
                        
                        <label>
                          <input type="radio" class="sentiment" name="cosentiment" value="negative" />
                          <i class="fa fa-arrow-down" aria-hidden="true"></i>
                        </label>
                        
                        <button type="button" class="submitdata" onclick="addNew3('cotitle', 'coexplanation', 'cosentiment', 'co-ul', 'li') ; buttonClick('company-ideas', {'title': 'cotitle', 'bullet': 'coexplanation', 'sentiment': 'cosentiment' })"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
              <div class = "sections">
                <div class = "headwinds">
                  <img class="arrow" src="images/sellarrow.png" alt=" ">
                  <ul id="co-ul-negative">
                      <li><div class = "bold-title">Flagship brands Rayban and Oakley are faltering: </div> RayBan (30% of sales) now oversupplied (now at Amazon and Costco), LUX has tried forcing a minimum price on its suppliers but it is not working (Costco selling way below the minimum price due to purchase of third party inventory). </li>
                      <li><div class = "bold-title">Doubling down on a declining distribution network: </div> planning to open 900+ stores and refurbish 300. Stores require heavy promotional budgets and inventory, as compared to online or specialized independent eye care professionals. </li>
                      <li><div class = "bold-title">Management/ownership shifts: </div> 61% of company held by 80+ founder, had to come back to run business, soon shares will be distributed to his 6 children (from 3 wives) with additional 25% to current wife. Wants to keep kids far away from operations. CEO & CFO of 10 years left in 2014. </li>
                      <li><div class = "bold-title">Reduced transparency: </div> recently reduced reporting from quarterly to bi-annually.</li>
                  </ul>
                </div>
                <div class = "tailwinds">
                  <img class="arrow" src="images/buyarrow.png" alt=" ">
                  <ul id="co-ul-positive">
                      <li><div class = "bold-title">Store-in-Store: </div> growing presence in Target, Macy, and Sears likely to provide higher operating margins in retail segment. </li>
                      <li><div class = "bold-title">Wearables: </div> deal with Google may provide interesting upside. </li>
                      <li><div class = "bold-title">Insane distribution: </div> their scale benefits are enormous and they've created a nice stream of no-hassle profits for the partners they license brands from. Unlikely to lose this moat anytime soon. </li>

                  </ul>
                </div>
              </div>
          </div>
          <div id = "valuation">
              <h1>Valuation<a data-toggle="modal" href="#valModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="valModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add a valuation bullet</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="title" name="valtitle">
                        <input type="text" placeholder="explanation" name="valexplanation">
                        
                        <label>
                          <input type="radio" class="sentiment" name="valsentiment" value="positive" />
                          <i class="fa fa-arrow-up" aria-hidden="true"></i>
                        </label>
                        
                        <label>
                          <input type="radio" class="sentiment" name="valsentiment" value="negative" />
                          <i class="fa fa-arrow-down" aria-hidden="true"></i>
                        </label>
                        
                        <button type="button" class="submitdata" onclick="addNew3('valtitle', 'valexplanation', 'valsentiment', 'val-ul', 'li') ; buttonClick('value-ideas', {'title': 'valtitle', 'bullet': 'valexplanation', 'sentiment': 'valsentiment' })"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
              <div class = "sections">
                <div class = "headwinds">
                  <img class="arrow" src="images/sellarrow.png" alt=" ">
                  <ul id="val-ul-negative">
                      <li><div class = "bold-title">Growth premium no longer justified: </div> Quite rich in general, likely too expensive when lower growth is factored in and competitive changes in the landscape start to show more.</li>
                      <li><div class = "bold-title">Retail footprint losing importance: </div> how much of their 10x multiple is due to the retail footprint, which is quickly losing importance</li>
                      <li><div class = "bold-title">Weak cash return: </div> Low dividend, weak ROIC historically</li>
                  </ul>
                </div>
                <div class = "tailwinds">
                  <img class="arrow" src="images/buyarrow.png" alt=" ">
                  <ul id="val-ul-positive">
                      <li><div class = "bold-title">Potential buyback on horizon: </div> bought back 1% of shares in 2016, got authorized for another 2%</li>
                  </ul>
                </div>
              </div>
          </div>
      </div>
      <div id="sidebarr">
        <div id="metrics">
            <h1>Key Metrics<a data-toggle="modal" href="#kmModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="kmModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add a Key Metric</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="metric" name="metricname" size="15">
                        <input type="number" placeholder="value" name="metricvalue" size="5">
                        <select name="metricunit">
                          <option value="M">M</option>
                          <option value="Bn">Bn</option>
                          <option value="%">%</option>
                          <option value="x">x</option>
                        </select>
                        <button type="button" class="submitdata" onclick="addNew4('metricname', 'metricvalue', 'metricunit','metriclist') ; buttonClick('key-metrics', {'metric': 'metricname', 'metric-value': 'metricvalue', 'unit': 'metricunit' })"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                    </div>
                
                  </div>
                </div>
            <div id = "metriclist">
              <li class="metric">Revenues: <div class="number">8.8bn</div></li>
              <li class="metric">EBITDA: <div class="number">1.9bn</div></li>
              <li class="metric">EV / EBITDA: <div class="number">11.4x</div></li>
              <li class="metric">EV / EBITA: <div class="number">13.9x</div></li>
              <li class="metric">EBITDA margin: <div class="number">18.3%</div></li>

            </div>
        </div>

        <div id="dcf">
            <h1>Quick DCF<a data-toggle="modal" href="#dModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="dModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Save DCF assumptions</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="Case name" name="casename">
                        <input type="text" placeholder="Notes" name="notes">
                        <button type="button" class="submitdata" onclick="buttonClick('case-values', {'name': 'casename', 'notes': 'notes', 'current-price': 'current-price', 'intrinsic-price': 'intrinsic-price', 'percent-undervalued':'percent-undervalued', 'rev-amt-five':'rev-amt-five', 'gross-amt-five': 'gross-amt-five', 'gross-pct-five': 'gross-pct-five', 'opex-amt-five': 'opex-amt-five', 'fcf-amt-five':'fcf-amt-five', 'fcf-pct-five' : 'fcf-pct-five', 'terminal-fcf': 'terminal-fcf', 'discount-rate' : 'discount-rate', 'shares-outstanding':'shares-outstanding', 'debt' : 'debt'})"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
            <div id = "dcfcalc">
                <div id="intrinsic">
                  <div class="intrin">Current Price: <div class="number"><span class="current-price" name="current-price"></div></div>
                  <div class="intrin">Intrinsic Price: <div class="number2"><span class="intrinsic-price" name="intrinsic-price"></span></div></div>
                  <div id="intrinnormal">% undervalued: <div class="number"><span class="percent-undervalued" name="percent-undervalued"></span></div></div>
                </div>
              <h4>ASSUMPTIONS</h4>
              <table>
                <tr>
                  <th></th>
                  <th>CAGR</th>
                  <th>LTM</th>
                  <th>YR 5</th>
                </tr>
                <tr class="blue">
                  <td class="left">Revenue</td>
                  <td><i id="five-revenue-pct-up" href="" class="fa fa-caret-up" aria-hidden="true"></i><span class="five-revenue-pct"></span><i id="five-revenue-pct-down" href="" class="fa fa-caret-down" aria-hidden="true"></i></td>
                  <td><span class="revenue-ltm"></span></td>
                  <td><span class="rev-amt-five" name="rev-amt-five"></span></td>
                </tr>
                <tr>
                  <td class="left">Gross Margin</td>
                  <td></td>
                  <td><span class="gross-margin-ltm"></span></td>
                  <td><span class="gross-amt-five" name="gross-amt-five"></span></td>
                </tr>
                <tr class="italic blue">
                  <td class="left">Margin %</td>
                  <td><i id="five-gross-margin-pct-up" href="" class="fa fa-caret-up" aria-hidden="true"></i><span class="five-gross-margin-pct"></span><i id="five-gross-margin-pct-down" href="" class="fa fa-caret-down" aria-hidden="true"></i></td>
                  <td><span class="gross-margin-pct"</span></td>
                  <td><span class="gross-pct-five" name="gross-pct-five"></span></td>
                </tr>
                <tr>
                  <td class="left">Expenses</td>
                  <td><i id="five-opex-margin-pct-up" href="" class="fa fa-caret-up" aria-hidden="true"></i><span class="five-opex-margin-pct"></span><i id="five-opex-margin-pct-down" href="" class="fa fa-caret-down" aria-hidden="true"></i></td>
                  <td><span class="opex-margin-ltm"></span></td>
                  <td><span class="opex-amt-five" name="opex-amt-five"></span></td>
                </tr>
                <tr class="blue">
                  <td class="left">FCF</td>
                  <td></td>
                  <td><span class="fcf-ltm"></span></td>
                  <td><span class="fcf-amt-five" name="fcf-amt-five"></span></td>
                </tr>
                 <tr class="italic blue">
                  <td class="left">FCF margin</td>
                  <td></td>
                  <td><span class="fcf-margin-pct"></span></td>
                  <td><span class="fcf-pct-five" name="fcf-pct-five"></span></td>
                </tr>
              </table>
              <li class="metric">Terminal Growth: <div class="number"><i id="terminal-fcf-up" href="" class="fa fa-caret-up" aria-hidden="true"></i><span class="terminal-fcf" name="terminal-fcf"></span><i id="terminal-fcf-down" href="" class="fa fa-caret-down" aria-hidden="true"></i></div></li>
              <li class="metric">Discount Rate: <div class="number"><i id="discount-rate-up" href="" class="fa fa-caret-up" aria-hidden="true"></i><span class="discount-rate" name="discount-rate"></span><i id="discount-rate-down" href="" class="fa fa-caret-down" aria-hidden="true"></i></div></li>
              <li class="metric">Shares o/s (mm): <div class="number"><span class="shares-outstanding" name="shares-outstanding"></span></div></li>
              <li class="metric">Net Debt (mm): <div class="number"><span class="debt" name="debt"></span></div></li>
            </div>
        </div>

        
        <div id="management"></div>
          <h1>Employee Reviews<a data-toggle="modal" href="#mModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="mModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add a management review</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="review" name="review">
                        <button type="button" class="submitdata" onclick="addNew('review','mgmt-ul','li') ; buttonClick('management', {'bullet': 'review'})"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
        <div class = mgmtcharts>
            <div class="donut"><span>CEO approval</span><div id = "CEO"></div></div>
            <div class="donut"><span>Employee NPS</span><div id = "NPS"></div></div>
            <div class="donut"><span>Outlook <i id="outlook" class="fa fa-arrow-up" aria-hidden="true"></i></span><div id = "OUTL"></div></div>
            <div id="mchart"></div>
        </div>
        <ul id="mgmt-ul">
                    <li>81 year old CEO and founder had to step in after departure of long ternured CFO and CEO</li>
                </ul>
          
        <div id="views"></div>
          <h1>Notable Views<a data-toggle="modal" href="#vModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="vModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add a view</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="quote" name="view">
                        <input type="text" placeholder="author" name="author">
                        <button type="button" class="submitdata" onclick="addNew5('view', 'author', 'nv-ul'); buttonClick('views', {'bullet': 'view', 'author': 'author'})"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
                <div id = "notableviews">
                <ul id="nv-ul">
                    <li>I think today in front of you, you've more than <span class="highlight">30 years of experience between myself, Stef and Nicol and Paolo. Even in this situation and in this configuration, we're solid.</span><div class = "author-foot"><span class = "author">Management</span><span class ="date">3/31/2016</span><span class="stars">5<i class="fa fa-star" aria-hidden="true"></i></span></div></li>
                    <li>If you now move to the right hand side of the page, <span class="highlight">retail deliver 20% growth on current FX, here clearly the tailwinds from the U.S. dollar evolution [ph] stronger than on our own retail division. </span>As you know probably 75% of our retail business is denominated in the U.S. dollar and therefore there is a major tailwinds in our results.<div class = "author-foot"><span class = "author">Management</span><span class ="date">3/31/2016</span><span class="stars">5<i class="fa fa-star" aria-hidden="true"></i></span></div></li>
                    <li>The wholesale that you see on the center upper part of the page grew 6% on a full year below our target and our expectation which was 9 to 11. The main reading here it's really related to the challenging performance of our Oakley business in 2015.<div class = "author-foot"><span class = "author">Management</span><span class ="date">3/31/2016</span><span class="stars">5<i class="fa fa-star" aria-hidden="true"></i></span></div></li>
                    <li>China and Brazil, these were our positive surprises as well. We have manufacturing in those countries. We're sort of naturally edged in terms of currency effect. Having said that, China is relatively small for business for us, accounts only for 3% of our total sales but in China, Mainland China contrary to what our competitors did, we grew 15% in China and astonishing performance in Brazil as well.<div class = "author-foot"><span class = "author">Management</span><span class ="date">3/31/2016</span><span class="stars">5<i class="fa fa-star" aria-hidden="true"></i></span></div></li>
                    <li>Evolving our strategy sits on our vertically integrated model and this is our DNA. We're not changing it. We are evolving as also the Chairman has [ph]. Vertical integration helped us a lot, our end to end approach we go from sketches, product design, manufacturing, distribution.<div class = "author-foot"><span class = "author">Management</span><span class ="date">3/31/2016</span><span class="stars">5<i class="fa fa-star" aria-hidden="true"></i></span></div></li>
                    <li>Relying on this pillar, we're happy to confirm the commitment we gave you two years ago. We said we're going to double the size of the company in 10 years, the good news we're well on track of that so we can confirm that by 2024 we will be a E15 billion company. In the next two years our e-commerce business very profitable will grow upto 7% of total group sales.<div class = "author-foot"><span class = "author">Management</span><span class ="date">3/31/2016</span><span class="stars">5<i class="fa fa-star" aria-hidden="true"></i></span></div></li>
                    <li>As you know probably 75% of our retail business is denominated in the U.S. dollar and therefore there is a major tailwinds in our results.<div class = "author-foot"><span class = "author">Management</span><span class ="date">3/31/2016</span><span class="stars">5<i class="fa fa-star" aria-hidden="true"></i></span></div></li>
                    <li>Well if <span class="highlight">Ray-Ban has a hiccup we're in trouble </span>but we're doing something, we're doing actually three things together to keep the equity of Ray-Ban up...<div class = "author-foot"><span class = "author">Management</span><span class ="date">3/31/2016</span><span class="stars">5<i class="fa fa-star" aria-hidden="true"></i></span></div></li>
                    
                    
                </ul>
                </div>
      
        <div id="tododiv">
            <h1>Additional items to diligence<a data-toggle="modal" href="#todoModal"><i class="fa fa-plus-circle" aria-hidden="true"></i></a></h1>
          
          <!-- Modal -->
                <div id="todoModal" class="modal fade" role="dialog" hidden="true">
                  <div class="modal-dialog">
                
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-minus-circle" aria-hidden="true"></i></button>
                        <h4 class="modal-title">Add a to do</h4>
                      </div>
                      <div class="modal-body">
                        <input type="text" placeholder="to do" name="todo">
                        <button type="button" class="submitdata" onclick="addNew('todo','todo-ul','li') ; buttonClick('to-dos', {'bullet': 'todo'})"><i class="fa fa-check" aria-hidden="true"></i></button>
                      </div>
                      
                    </div>
                
                  </div>
                </div>
            <div id = "todos">
                <ul id="todo-ul">
                    <li>Survey to ascertain demographic trends in optic + sun purchasing</li>
                    <li>review licensing agreements and how they've evolved</li>
                    <li>understand online sunglass purchasing trend</li>
                    <li>Eliminating the effect of foreign exchange (which has benefitted LUX recently), what is happening to the underlying business, wholesale and retail</li>
                    <li>Interview key brands with upcoming license expirations to assess risk of loss</li>
                    <li>Model sensitivities: price declines in China, decline in retail productivity, loss of major customers, upside from moving production to lower cost countries</li>
                </ul>
            </div>
        </div>
      </div>
      <div id="footer"></div>
    </div>
   </body>
</html>